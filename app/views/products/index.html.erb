<%= render 'navtab' %>
<h1>Produits</h1>
<div class="card">
  <div class="card-body">
    <%= form_with url: products_path, method: :get do |form| %>
      <%= form.label :tri, "Trier:", class:"form-label" %>
      <%= form.select :tri, options_for_select(["Date d√©croissant", "Date croissant", "Prix d√©croissant", "Prix croissant"]), class:"form-select" %>
      <%= form.text_field :query, placeholder:"Chercher par nom" %>
      <%= form.submit "Filtrer", class:"btn btn-primary" %>
      <%= link_to "Stock bas("+low_stock_count.to_s+")", products_path + "?low_stock=true",  class:"btn btn-danger" %>
    <% end %>
  </div>
</div>
<table class="table table-bordered table-striped">
  <thead class="table-dark">
    <tr>
      <th>Id</th>
      <th>Nom</th>
      <th>Date de sortie</th>
      <th>Cat√©gorie</th>
      <th>Sous-cat√©gorie</th>
      <th>Prix</th>
      <th>Quantit√©</th>
      <th>Stock Minimun</th>
      <th>Commandable</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @products.each do |product| %>
      <tr>
        <td><%= product.id %></td>
        <td><%= product.name %></td>
        <td><%= product.date %></td>
        <td><%= product.subcategory.name %></td>
        <td><%= product.category.name %></td>
        <td><%= product.price %></td>
        <td><%= product.quantity %></td>
        <td><%= product.min_stock %></td>
        <td><% if product.available %>
            Disponible
          <% else %>
            Pas disponible
          <% end %></td>
        <td><%= link_to 'üîé', product %></td>
        <td><%= link_to '‚úèÔ∏è', edit_product_path(product) %></td>
        <td><%= link_to 'üóëÔ∏è', product, method: :delete, data: { confirm: '√ätes vous certain de vouloir le supprimer ?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<br>
<%= link_to 'Cr√©e produit', new_product_path, class:"btn btn-dark" %>
